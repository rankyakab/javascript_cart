<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <h1>shopping cart</h1>
	<div>
		<ul>
			<li><a class="add_to_cart" href="" data-name="apple" data-price="33.00" > Apple | $33.00 </a></li>
			<li><a class="add_to_cart" href="" data-name="mango" data-price="34.00" > Mango | $34.00 </a></li>
			<li><a  class="add_to_cart" href="" data-name="orange" data-price="38.00" > orange | $38.00 </a></li>
			<li><a  class="add_to_cart" href="" data-name="paw paw" data-price="43.00" > paw paw | $43.00 </a></li>
		</ul>
		<button id="clear_cart"> clear cart </button>
	</div>
	<div>
		
		<ul id="show_cart">
			
		</ul>
	</div>
  </body>
  <script type="text/javascript">
  var add_to_cart = document.getElementsByClassName("add_to_cart");
  for(let i in Array.from(add_to_cart)){
  add_to_cart[i].addEventListener("click",(event)=>{
	event.preventDefault();
	var name = event.target.getAttribute("data-name");
	var price = Number(event.target.getAttribute("data-price"));
	console.log(name, price)
	addItemToCart(name,price,1);
	display_cart();
  });
  }

  function display_cart(){
		var display_section = document.getElementById("show_cart");
		var display = "";
		var cartArray = listCart();
		for(let i in cartArray){
			display+="<li> Name : "+cartArray[i].name+" || Count : "+cartArray[i].count+" </li>";
		}
		display_section.innerHTML=display;
  }
      var Cart = [];
      var Item = function(name,price,count){
        this.name=name
        this.price=price
        this.count=count
      }

      function addItemToCart(name, price, count){
         for(var item in Cart){
           if(Cart[item].name===name){
             Cart[item].count +=count;
             return;
           }
         }
        var item = new Item(name,price,count);
        Cart.push(item);
		saveCart();
      }


  
      // removes one item from charset
      function removeItemFromCart(name){
      for(var item in Cart){
        if(Cart[item].name===name){
          Cart[item].count--;
          if(Cart[item].count===0){
            Cart.splice(item, 1);
          }
          break;
        }

      }
	  saveCart();
    }
 


      //removeItemFromCartAll() removes all item from chart
    function removeItemFromCartAll(name){
      for(var item in Cart){
        if(Cart[item].name===name){
            Cart.splice(item, 1);
            break;
        }

      }
	  
	  saveCart();
    }
      //clearCart ()
      function clearCart(){
        Cart = [];
		saveCart();
      }
    //  clearCart();
      //countCart()  returns total count
      function countCart(){
        var totalCount=0;
        for(let item in Cart){
          totalCount+=Cart[item].count;
        }
        return totalCount;
      }
      console.log(countCart());
      //totalCount() returns total cost
      function totalCount(){
        var total=0;
        for(let item in Cart){
          total+=Cart[item].price;
        }
        return total;
      }
     
      //listCart()
      //first partten
      /*
      function listCart(){
        var arrayObject=[];
        for(var i in Cart){
          var newItem = new Item(Cart[i].name,Cart[i].price,Cart[i].count);
          arrayObject.push(newItem);
        }
        return arrayObject;
      }
      */
      //second partern
      function listCart(){
        var arrayObject=[];
        for(var i in Cart){
           var obj = {};
          for(var keys in Cart[i]){
            obj[keys] = Cart[i][keys];
          }
          arrayObject.push(obj);
        }
        return arrayObject;
      }
      
      //saveCart()
	  function saveCart(){
		localStorage.setItem("shopping_cart", JSON.stringify(Cart));
	  }
	  localStorage.setItem("bola",4 );
      //loadCart()
	  function loadCart(){
		 Cart = JSON.parse(localStorage.getItem("shopping_cart"));
	  }
	 loadCart();
	  var right = listCart();
	 console.log(right);



  </script>
</html>
